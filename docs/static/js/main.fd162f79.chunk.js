(this["webpackJsonpdashboard-react"]=this["webpackJsonpdashboard-react"]||[]).push([[0],{116:function(e,t,a){e.exports=a(135)},121:function(e,t,a){},122:function(e,t,a){},127:function(e,t,a){},129:function(e,t,a){},131:function(e,t,a){},135:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),l=(a(121),a(122),a(178)),i=a(181),s=a(183),u=a(106),m=a(184),d=Object(l.a)((function(e){return{root:{flexGrow:1},topPanel:{backgroundColor:"#1976d2"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function f(){var e=d();return r.a.createElement("div",{className:e.root},r.a.createElement(i.a,{position:"static",className:e.topPanel},r.a.createElement(s.a,null,r.a.createElement(m.a,{edge:"start",className:e.menuButton,"aria-label":"menu"}),r.a.createElement(u.a,{variant:"h6",className:e.title},"INTERACTIVE DASHBOARD"))))}var p=a(43),h=a.n(p),b=a(57),g=a(7),E=a(68),v=a(193),y=a(101),O=a(197),j=a(189),D=(a(127),a(196)),k=a(199),S=a(191),x="location",C="date",Y="Select Location",w="Select Period",N="Select Date",M="Select Year",T="Select Month",W="Select Week",I="Weekly",J="WeeklyWednesday",R="Monthly",A="Quarterly",B="SixMonthly",P="FinancialApril",F="Yearly",L="YYYY",H="MMM YYYY",z="MMM DD, YYYY",G="MMM DD, YYYY",_="DD-MM-YYYY",K="check",Q="add",U=a(202),V=a(187),$=a(195),q=a(194),X=a(200),Z=a(188),ee=a(103),te=a(206),ae=a(19),ne=a.n(ae),re=a(49),ce=a(22),oe=a(198),le=a(185),ie=a(93),se=a.n(ie),ue=a(94),me=a.n(ue),de=a(205),fe=(a(129),Object(l.a)({root:{height:350,flexGrow:1,maxWidth:400},selected:{content:{background:"blue"}}}));function pe(e){var t=fe(),a=r.a.useState({}),n=Object(g.a)(a,2),c=(n[0],n[1]);return r.a.createElement(le.a,{className:t.root,defaultCollapseIcon:r.a.createElement(se.a,null),defaultExpanded:["root"],defaultExpandIcon:r.a.createElement(me.a,null)},function e(t,a,n){return r.a.createElement(de.a,{key:t.id,nodeId:t.id,label:t.name,onLabelClick:function(e){return a(e,t)},classes:{selected:n.selected}},Array.isArray(t.children)?t.children.map((function(t){return e(t,a,n)})):null)}(e.tree,(function(t,a){t.preventDefault(),c(a),e.onSelect(a)}),t))}var he=a(192),be=a(24),ge=a(20),Ee=a(29),ve=a(67),ye=(a(131),function(e){Object(Ee.a)(a,e);var t=Object(ve.a)(a);function a(){return Object(be.a)(this,a),t.apply(this,arguments)}return Object(ge.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"dot dot-1"}),r.a.createElement("div",{className:"dot dot-2"}),r.a.createElement("div",{className:"dot dot-3"}),r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1"},r.a.createElement("defs",null,r.a.createElement("filter",{id:"goo"},r.a.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"10",result:"blur"}),r.a.createElement("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 21 -7"})))))}}]),a}(r.a.Component)),Oe=a(98),je=a.n(Oe),De=a(99),ke=a.n(De),Se=a(8),xe=a(3),Ce=a(75),Ye=a(64),we=a(76),Ne=a(95),Me=a(69),Te=a(96),We=a(190),Ie=a(5),Je=function(e){Object(Ee.a)(a,e);var t=Object(ve.a)(a);function a(){var e;return Object(be.a)(this,a),(e=t.call(this)).state={selectedDate:new Date},e.makeJSDateObject=function(e){return e.clone().toDate()},e.handleWeekChange=function(t){e.setState({selectedDate:Object(Me.a)(e.makeJSDateObject(t))})},e.formatWeekSelectLabel=function(t,a){var n=e.makeJSDateObject(t);return n&&Object(Ye.a)(n)?"Week of ".concat(Object(Ce.a)(Object(Me.a)(n),"MMM do")):a},e.renderWrappedWeekDay=function(t,a,n){var c,o,l=e.props.classes,i=e.makeJSDateObject(t),s=e.makeJSDateObject(a),u=Object(Me.a)(s),d=Object(Ne.a)(s),f=Object(Te.a)(i,{start:u,end:d}),p=Object(we.a)(i,u),h=Object(we.a)(i,d),b=Object(xe.a)((c={},Object(Se.a)(c,l.highlight,f),Object(Se.a)(c,l.firstHighlight,p),Object(Se.a)(c,l.endHighlight,h),c)),g=Object(xe.a)(l.day,(o={},Object(Se.a)(o,l.nonCurrentMonthDay,!n),Object(Se.a)(o,l.highlightNonCurrentMonthDay,!n&&f),o));return r.a.createElement("div",{className:b},r.a.createElement(m.a,{className:g},r.a.createElement("span",null," ",Object(Ce.a)(i,"d")," ")))},e.state={modalShow:!1,setModalShow:!1,selected:null},e}return Object(ge.a)(a,[{key:"render",value:function(){var e=this.state.selectedDate;return r.a.createElement(ce.a,{utils:re.a},r.a.createElement(oe.a,Object.assign({},this.props,{label:"Week picker",value:e,renderDay:this.renderWrappedWeekDay,labelFunc:this.formatWeekSelectLabel,open:this.props.open,TextFieldComponent:function(){return null}})))}}]),a}(n.PureComponent),Re=Object(We.a)((function(e){return{dayWrapper:{position:"relative"},day:{width:36,height:36,fontSize:e.typography.caption.fontSize,margin:"0 2px",color:"inherit"},customDayHighlight:{position:"absolute",top:0,bottom:0,left:"2px",right:"2px",border:"1px solid ".concat(e.palette.secondary.main),borderRadius:"50%"},nonCurrentMonthDay:{color:e.palette.text.disabled},highlightNonCurrentMonthDay:{color:"#676767"},highlight:{background:e.palette.primary.main,color:e.palette.common.white},firstHighlight:{extend:"highlight",borderTopLeftRadius:"50%",borderBottomLeftRadius:"50%"},endHighlight:{extend:"highlight",borderTopRightRadius:"50%",borderBottomRightRadius:"50%"}}})),Ae=Object(Ie.a)(Re)(Je),Be=function(e,t){switch(t){case I:return{startDate:ne()(e).format(_),endDate:ne()(e).add(7,"d").format(_)};case R:var a=ne()(e).format("M"),n=ne()(e).format("YYYY");if("1"===a||"3"===a||"5"===a||"7"===a||"8"===a||"10"===a||"12"===a)return"1"===a||"3"===a||"5"===a||"7"===a||"8"===a?{startDate:"01-0"+a+"-"+n,endDate:"31-0"+a+"-"+n}:{startDate:"01-"+a+"-"+n,endDate:"31-"+a+"-"+n};if("4"===a||"6"===a||"9"===a||"11"===a)return"4"===a||"6"===a||"9"===a?{startDate:"01-0"+a+"-"+n,endDate:"30-0"+a+"-"+n}:{startDate:"01-"+a+"-"+n,endDate:"30-"+a+"-"+n};if("2"===a)return{startDate:"01-0"+a+"-"+n,endDate:"29-0"+a+"-"+n};break;case B:var r=ne()(e).format("M"),c=ne()(e).format("YYYY");return r<7?{startDate:"01-01-"+c,endDate:"30-06-"+c}:{startDate:"01-07-"+c,endDate:"31-12-"+c};case A:break;case F:var o=ne()(e).format("YYYY");return{startDate:"01-01-"+o,endDate:"31-12-"+o}}},Pe=r.a.createElement(je.a,{fontSize:"small"}),Fe=r.a.createElement(ke.a,{fontSize:"small"});function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){setTimeout(t,e)}))}var He=r.a.forwardRef((function(e,t){return r.a.createElement(he.a,Object.assign({direction:"up",ref:t},e))}));function ze(){return(ze=Object(E.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=3,fetch("https://who.aeturn.dev/api/v1.0/search",a);case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,console.log(r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(){var e=r.a.useState(),t=Object(g.a)(e,2),a=t[0],n=t[1],c=r.a.useState(),o=Object(g.a)(c,2),l=o[0],i=o[1],s=r.a.useState(""),u=Object(g.a)(s,2),m=u[0],d=u[1],f=r.a.useState(),p=Object(g.a)(f,2),A=p[0],ae=p[1],le=r.a.useState({}),ie=Object(g.a)(le,2),se=ie[0],ue=ie[1],me=r.a.useState([]),de=Object(g.a)(me,2),fe=de[0],he=de[1],be=r.a.useState(!1),ge=Object(g.a)(be,2),Ee=ge[0],ve=ge[1],Oe=r.a.useState([]),je=Object(g.a)(Oe,2),De=je[0],ke=je[1],Se=Ee&&0===De.length,xe=r.a.useState(!1),Ce=Object(g.a)(xe,2),Ye=Ce[0],we=Ce[1],Ne=r.a.useState(x),Me=Object(g.a)(Ne,2),Te=Me[0],We=Me[1],Ie=r.a.useState(!1),Je=Object(g.a)(Ie,2),Re=Je[0],Ge=Je[1],_e=r.a.useState(null),Ke=Object(g.a)(_e,2),Qe=Ke[0],Ue=Ke[1],Ve=r.a.useState({}),$e=Object(g.a)(Ve,2),qe=$e[0],Xe=$e[1],Ze=function(e){e&&(n(e),i(m===R?ne()(e).format(H):m===F||m===B?ne()(e).format(L):m===I?function(e){return ne()(e).format(z)+" to "+ne()(e).add(7,"d").format(z)}(e):ne()(e).format(G))),we(!1)},et=function(e){we(!0),We(e)},tt=function(){ue(""),we(!1)},at=function(){Ge(!0),function(e){ze.apply(this,arguments)}({date:Be(a,m),orgunit_name:se.name,orgunit_id:se.id,indicators:fe.map((function(e){return e.name}))})},nt=function(){d(""),n()},rt=function(e){if(ae(e),Ue(null),m===B){var t=ne()(a).format(L);n(1==e?ne()("01-01-"+t).format(_):ne()("01-07-"+t).format(_))}};return r.a.useEffect((function(){var e=!0;if(Se)return Object(E.a)(h.a.mark((function t(){var a,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://who.aeturn.dev/api/v1.0/dataelement");case 2:return a=t.sent,t.next=5,Le(1e3);case 5:return t.next=7,a.json();case 7:n=t.sent,e&&ke(n.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{periodType:e.periodType[0]?e.periodType[0]===P?F:e.periodType[0]===J?I:e.periodType[0]:""})})));case 9:case"end":return t.stop()}}),t)})))(),function(){e=!1}}),[Se]),r.a.useEffect((function(){Ee||ke([])}),[Ee]),r.a.useEffect((function(){Object(E.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://who.aeturn.dev/api/v1.0/orgunit");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.organisationUnits[0],Xe(n);case 8:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement("div",null,r.a.createElement(v.a,{className:"justify-content-center align-items-center"},r.a.createElement(y.a,{className:"col-8 mt-5"},r.a.createElement(O.a,null,r.a.createElement(k.a,{id:"asynchronous-demo",multiple:!0,freeSolo:!0,open:Ee,onOpen:function(){ve(!0)},onClose:function(){ve(!1)},getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},options:De,getOptionDisabled:function(e){return fe[0]&&e.periodType!==fe[0].periodType},disableCloseOnSelect:!0,loading:Se,onChange:function(e,t){return function(e){he(e),e.length>0?d(e[0].periodType):nt()}(t)},renderOption:function(e,t){var a=t.selected;return r.a.createElement(r.a.Fragment,null,r.a.createElement(X.a,{icon:Pe,checkedIcon:Fe,style:{marginRight:8},checked:a}),e.name,r.a.createElement(y.a,{className:"text-right periodTypeInList"},e.periodType))},renderInput:function(e){return r.a.createElement(D.a,Object.assign({},e,{label:"Search Indicators",variant:"outlined",InputProps:Object(b.a)(Object(b.a)({},e.InputProps),{},{endAdornment:r.a.createElement(r.a.Fragment,null,Se?r.a.createElement(S.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})))),r.a.createElement(v.a,{className:"justify-content-center"},r.a.createElement(y.a,{className:"col-5 mt-3 text-left"},r.a.createElement(j.a,{variant:"contained",className:"mr-2"+(se.name?" btn-checked":""),onClick:function(){return et(x)}},r.a.createElement("i",{className:"material-icons"},se.name?K:Q),se.name?se.name:Y),r.a.createElement(j.a,{variant:"contained",className:"mx-2"+(a?" btn-checked":""),onClick:function(){return et(C)}},r.a.createElement("i",{className:"material-icons"},a?K:Q),a?l:m===F||m===B?M:m===R?T:m===I?W:N),m===B?r.a.createElement(j.a,{variant:"contained",className:"mx-2"+(A?" btn-checked":""),onClick:function(e){Ue(e.currentTarget)}},r.a.createElement("i",{className:"material-icons"},A?K:Q),1===A?"January - June":2===A?"July - December":w):null,r.a.createElement(ee.a,{id:"simple-menu",keepMounted:!0,anchorEl:Qe,open:Boolean(Qe),onClose:rt},r.a.createElement(te.a,{onClick:function(e){return rt(1)}},"January - June"),r.a.createElement(te.a,{onClick:function(e){return rt(2)}},"July - December"))),r.a.createElement(y.a,{className:"col-3 text-right mt-3 d-flex justify-content-end"},r.a.createElement(y.a,{className:"mx-2 mt-1"},"Clear dashboard"),r.a.createElement(j.a,{variant:"contained",className:"btn-primary",onClick:function(){return at()}},"Add"))),r.a.createElement(U.a,{open:Ye&&Te===x,onClose:tt,fullWidth:!0,maxWidth:"sm",TransitionComponent:He,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},r.a.createElement(q.a,{id:"scroll-dialog-title"},Te===x?Y:N),r.a.createElement(V.a,{dividers:!0},r.a.createElement($.a,{id:"scroll-dialog-description",tabIndex:-1},r.a.createElement(pe,{onSelect:function(e){ue(e)},tree:qe}))),r.a.createElement(Z.a,null,r.a.createElement(j.a,{onClick:tt,color:"primary"},"Cancel"),r.a.createElement(j.a,{onClick:function(){we(!1)},color:"primary"},"Save"))),m===R?r.a.createElement(ce.a,{utils:re.a},r.a.createElement(oe.a,{views:["year","month"],label:"Year and Month",value:a,open:Ye&&"date"===Te,onChange:Ze,onClose:Ze,TextFieldComponent:function(){return null}})):m===F||m===B?r.a.createElement(ce.a,{utils:re.a},r.a.createElement(oe.a,{views:["year"],label:"Year only",value:a,open:Ye&&Te===C,onChange:Ze,onClose:Ze,TextFieldComponent:function(){return null}})):"Weekly"===m?r.a.createElement(Ae,{open:Ye&&Te===C,onChange:function(e){Ze(e)},onClose:Ze}):r.a.createElement(ce.a,{utils:re.a},r.a.createElement(oe.a,{margin:"normal",disableFuture:!0,id:"date-picker-dialog",label:"Date picker dialog",format:"MM/dd/yyyy",value:a,onChange:Ze,onClose:Ze,KeyboardButtonProps:{"aria-label":"change date"},open:Ye&&Te===C,TextFieldComponent:function(){return null}})),r.a.createElement(v.a,{className:"justify-content-center mt-5"},r.a.createElement(y.a,{className:"col-10 charts-container"},Re?r.a.createElement(ye,{className:"loader-div"}):null)))}var _e=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(f,null),r.a.createElement(Ge,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(134);o.a.render(r.a.createElement(_e,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[116,1,2]]]);
//# sourceMappingURL=main.fd162f79.chunk.js.map