(this["webpackJsonpdashboard-react"]=this["webpackJsonpdashboard-react"]||[]).push([[0],{103:function(e,a,t){},104:function(e,a,t){},109:function(e,a,t){},110:function(e,a,t){},112:function(e,a,t){},114:function(e,a,t){},118:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(14),l=t.n(c),o=(t(103),t(104),t(166)),i=t(169),u=t(171),m=t(82),s=t(172),d=Object(o.a)((function(e){return{root:{flexGrow:1},topPanel:{backgroundColor:"#1976d2"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function f(){var e=d();return r.a.createElement("div",{className:e.root},r.a.createElement(i.a,{position:"static",className:e.topPanel},r.a.createElement(u.a,null,r.a.createElement(s.a,{edge:"start",className:e.menuButton,"aria-label":"menu"}),r.a.createElement(m.a,{variant:"h6",className:e.title},"INTERACTIVE DASHBOARD"))))}var p=t(37),E=t.n(p),h=t(48),b=t(8),v=t(60),g=t(175),y=t(75),O=t(191),j=t(186),x=(t(109),t(198)),S=t(193),w=t(185),N="location",k="date",C="Select Location",D="Select Period",Y="check",I="add",M=[{id:"d",name:"Daily"},{id:"w",name:"Weekly"},{id:"m",name:"Monthly"},{id:"q",name:"Quarterly"},{id:"sm",name:"Six-monthly"},{id:"y",name:"Yearly"}],A=[{id:"01",name:"January"},{id:"02",name:"February"},{id:"03",name:"March"},{id:"04",name:"April"},{id:"05",name:"May"},{id:"06",name:"June"},{id:"07",name:"July"},{id:"08",name:"August"},{id:"09",name:"September"},{id:"10",name:"October"},{id:"11",name:"November"},{id:"12",name:"December"}],J=[{id:"Q1",name:"January - March"},{id:"Q2",name:"April - June"},{id:"Q3",name:"July - September"},{id:"Q4",name:"October - December"}],P=[{id:"S1",name:"January - June"},{id:"S2",name:"July - December"}],R=t(197),T=t(188),W=t(189),B=t(187),G=t(194),L=t(190),Q=t(173),_=t(72),z=t.n(_),F=t(73),q=t.n(F),H=t(201),K=(t(110),Object(o.a)({root:{height:350,flexGrow:1,maxWidth:400},selected:{content:{background:"blue"}}}));function U(e){var a=K(),t=r.a.useState({}),n=Object(b.a)(t,2),c=(n[0],n[1]);return r.a.createElement(Q.a,{className:a.root,defaultCollapseIcon:r.a.createElement(z.a,null),defaultExpanded:["root"],defaultExpandIcon:r.a.createElement(q.a,null)},function e(a,t,n){return r.a.createElement(H.a,{key:a.id,nodeId:a.id,label:a.name,onLabelClick:function(e){return t(e,a)},classes:{selected:n.selected}},Array.isArray(a.children)?a.children.map((function(a){return e(a,t,n)})):null)}(e.tree,(function(a,t){a.preventDefault(),c(t),e.onSelect(t)}),a))}var V=t(24),$=t(199),X=t(181),Z=t(176),ee=t(192),ae=(t(112),t(36)),te=t.n(ae),ne=t(180),re=t(120),ce=t(183),le=t(174),oe=t(195),ie=function(e){return Object(le.a)({start:new Date(e,0,1),end:new Date(e,11,31)}).map((function(e){return{id:te()(e).format("YYYYMMDD"),name:te()(e).format("YYYY-MM-DD")}}))},ue=function(e){return Object(oe.a)({start:new Date(e,0,1),end:new Date(e,11,31)}).map((function(e,a){return{id:a+1<10?"W0"+(a+1):"W"+(a+1),name:te()(e).format("YYYY-MM-DD")+" - "+te()(e).add(6,"d").format("YYYY-MM-DD")}}))},me=function(e){for(var a=parseInt(e),t=[{id:a,name:a}],n=1;n<10;n++)t.push({id:a-n,name:a-n});return t},se=function(e){for(var a=parseInt(e),t=[a],n=1;n<5;n++)t.push(a+n),t.unshift(a-n);return t},de=t(182),fe=t(200),pe=t(119),Ee=Object(o.a)({root:{height:350,flexGrow:1},formControl:{minWidth:"120px",marginRight:20},periodBox:{height:280,marginTop:20,marginLeft:10,border:"1px solid lightgray",borderRadius:4,overflow:"scroll",padding:0},paperRoot:{height:350,listStyle:"none",padding:1,margin:0,overflow:"scroll",border:"1px solid lightgray",borderRadius:4,boxShadow:"none"}});function he(e){var a=Ee(),t=r.a.useState([]),n=Object(b.a)(t,2),c=n[0],l=n[1],o=r.a.useState("m"),i=Object(b.a)(o,2),u=i[0],m=i[1],s=r.a.useState(!1),d=Object(b.a)(s,2),f=d[0],p=d[1],E=r.a.useState(parseInt(te()(new Date).format("YYYY"))),h=Object(b.a)(E,2),v=h[0],O=h[1],j=r.a.useState(se(v)),x=Object(b.a)(j,2),S=x[0],w=x[1],N=r.a.useState([]),k=Object(b.a)(N,2),C=k[0],D=k[1],Y=function(a){l(a),e.onSelect(a.map((function(e){return e.id})))},I=function(e){return function(){var a=c.findIndex((function(a){return a.id===e.id})),t=Object(V.a)(c);-1===a?t.push(e):t.splice(a,1),Y(t)}};return r.a.useEffect((function(){switch(u){case"d":D(ie(v));break;case"w":D(ue(v));break;case"m":D((e=v,A.map((function(a){return{id:e+a.id,name:a.name+" "+e}}))));break;case"q":D(function(e,a){return e.map((function(e){return{id:a+e.id,name:e.name+" "+a}}))}(J,v));break;case"sm":D(function(e,a){return e.map((function(e){return{id:a+e.id,name:e.name+" "+a}}))}(P,v));break;case"y":D(me(v))}var e}),[u,v]),r.a.createElement(g.a,{className:a.root},r.a.createElement(y.a,{className:"col col-lg-8 col-md-8 col-sm-8"},r.a.createElement(g.a,null,r.a.createElement(y.a,null,r.a.createElement(Z.a,{className:a.formControl},r.a.createElement($.a,null,"Period type"),r.a.createElement(ee.a,{onChange:function(e){m(e.target.value)},value:u},M.map((function(e){return r.a.createElement(X.a,{value:e.id},e.name)})))),r.a.createElement(Z.a,{className:a.formControl},r.a.createElement($.a,null,"Year"),r.a.createElement(ee.a,{className:"year-selection",onChange:function(e){"prev"!==e.target.value&&"next"!==e.target.value?("y"===u?D(me(e.target.value)):"d"===u?D(ie(e.target.value)):"w"===u&&D(ue(e.target.value)),O(e.target.value),p(!1)):("prev"===e.target.value?w(se(S[0]-1)):w(se(S[8]+1)),p(!0))},onClose:function(){p(!1)},onOpen:function(){p(!0)},value:v,open:f},r.a.createElement(X.a,{value:"prev"},r.a.createElement(de.a,null,"expand_less")),S.map((function(e){return r.a.createElement(X.a,{value:e},e)})),r.a.createElement(X.a,{value:"next"},r.a.createElement(de.a,null,"expand_more")))))),r.a.createElement(g.a,null,r.a.createElement(y.a,{className:a.periodBox},r.a.createElement(ne.a,null,C.map((function(e,a){return r.a.createElement(re.a,{key:a,role:void 0,dense:!0,button:!0,onClick:I(e)},r.a.createElement(ce.a,null,r.a.createElement(G.a,{edge:"start",tabIndex:-1,disableRipple:!0,checked:-1!==c.findIndex((function(a){return a.id===e.id}))})),"w"===u?"WEEK "+(a+1)+" - "+e.name:e.name)})))))),r.a.createElement(y.a,{className:"col col-lg-4 col-md-4 col-sm-4"},r.a.createElement(pe.a,{component:"ul",className:a.paperRoot},c.map((function(e){return r.a.createElement("li",{key:e.key},r.a.createElement(fe.a,{label:e.name,onDelete:(a=e,function(){var e=c.findIndex((function(e){return e.id===a.id})),t=Object(V.a)(c);t.splice(e,1),Y(t)}),className:"my-1 ml-2"}));var a})))))}var be=t(184),ve=t(58),ge=t(29),ye=t(80),Oe=t(79),je=(t(114),function(e){Object(ye.a)(t,e);var a=Object(Oe.a)(t);function t(){return Object(ve.a)(this,t),a.apply(this,arguments)}return Object(ge.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"dot dot-1"}),r.a.createElement("div",{className:"dot dot-2"}),r.a.createElement("div",{className:"dot dot-3"}),r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1"},r.a.createElement("defs",null,r.a.createElement("filter",{id:"goo"},r.a.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"10",result:"blur"}),r.a.createElement("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 21 -7"})))))}}]),t}(r.a.Component)),xe=t(76),Se=t.n(xe),we=t(77),Ne=t.n(we),ke=r.a.createElement(Se.a,{fontSize:"small"}),Ce=r.a.createElement(Ne.a,{fontSize:"small"});var De=r.a.forwardRef((function(e,a){return r.a.createElement(be.a,Object.assign({direction:"up",ref:a},e))}));function Ye(){return(Ye=Object(v.a)(E.a.mark((function e(a){var t,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=3,fetch("https://who.aeturn.dev/api/v1.0/search",t);case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,console.log(r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(){var e=r.a.useState([]),a=Object(b.a)(e,2),t=a[0],n=a[1],c=r.a.useState({}),l=Object(b.a)(c,2),o=l[0],i=l[1],u=r.a.useState([]),m=Object(b.a)(u,2),s=m[0],d=m[1],f=r.a.useState(!1),p=Object(b.a)(f,2),M=p[0],A=p[1],J=r.a.useState([]),P=Object(b.a)(J,2),Q=P[0],_=P[1],z=M&&0===Q.length,F=r.a.useState(!1),q=Object(b.a)(F,2),H=q[0],K=q[1],V=r.a.useState(N),$=Object(b.a)(V,2),X=$[0],Z=$[1],ee=r.a.useState(!1),ae=Object(b.a)(ee,2),te=ae[0],ne=ae[1],re=r.a.useState({}),ce=Object(b.a)(re,2),le=ce[0],oe=ce[1],ie=function(e){K(!0),Z(e)},ue=function(){i(""),K(!1)},me=function(){ne(!0);var e={date:t,orgunit_name:o.name,orgunit_id:o.id,indicators:s.map((function(e){return e.name}))};!function(e){Ye.apply(this,arguments)}(e),console.log(e)};return r.a.useEffect((function(){var e=!0;if(z)return Object(v.a)(E.a.mark((function a(){var t,n;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("https://who.aeturn.dev/api/v1.0/dataelement");case 2:return t=a.sent,a.next=5,t.json();case 5:n=a.sent,e&&_(n.filter((function(e){if(e.periodType.length>0)return Object(h.a)(Object(h.a)({},e),{},{periodType:e.periodType[0]})})));case 7:case"end":return a.stop()}}),a)})))(),function(){e=!1}}),[z]),r.a.useEffect((function(){M||_([])}),[M]),r.a.useEffect((function(){Object(v.a)(E.a.mark((function e(){var a,t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://who.aeturn.dev/api/v1.0/orgunit");case 2:return a=e.sent,e.next=5,a.json();case 5:t=e.sent,n=t.organisationUnits[0],oe(n);case 8:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement("div",null,r.a.createElement(g.a,{className:"justify-content-center align-items-center"},r.a.createElement(y.a,{className:"col-8 mt-5"},r.a.createElement(O.a,null,r.a.createElement(S.a,{id:"asynchronous-demo",multiple:!0,freeSolo:!0,open:M,onOpen:function(){A(!0)},onClose:function(){A(!1)},getOptionSelected:function(e,a){return e.name===a.name},getOptionLabel:function(e){return e.name},options:Q,disableCloseOnSelect:!0,loading:z,onChange:function(e,a){return function(e){d(e)}(a)},renderOption:function(e,a){var t=a.selected;return r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{icon:ke,checkedIcon:Ce,style:{marginRight:8},checked:t}),e.name,r.a.createElement(y.a,{className:"text-right periodTypeInList"},e.periodType))},renderInput:function(e){return r.a.createElement(x.a,Object.assign({},e,{label:"Search Indicators",variant:"outlined",InputProps:Object(h.a)(Object(h.a)({},e.InputProps),{},{endAdornment:r.a.createElement(r.a.Fragment,null,z?r.a.createElement(w.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})))),r.a.createElement(g.a,{className:"justify-content-center"},r.a.createElement(y.a,{className:"col-5 mt-3 text-left"},r.a.createElement(j.a,{variant:"contained",className:"mr-2"+(o.name?" btn-checked":""),onClick:function(){return ie(N)}},r.a.createElement("i",{className:"material-icons"},o.name?Y:I),o.name?o.name:C),r.a.createElement(j.a,{variant:"contained",className:"mx-2"+(t.length?" btn-checked":""),onClick:function(){return ie(k)}},r.a.createElement("i",{className:"material-icons"},t.length?Y:I),t.length?"Period: "+t.length+" selected":"Select Period")),r.a.createElement(y.a,{className:"col-3 text-right mt-3 d-flex justify-content-end"},r.a.createElement(y.a,{className:"mx-2 mt-1"},"Clear dashboard"),r.a.createElement(j.a,{variant:"contained",className:"btn-primary",onClick:function(){return me()}},"Add"))),r.a.createElement(R.a,{open:H,onClose:ue,fullWidth:!0,maxWidth:"sm",className:"dialogNoPadding",TransitionComponent:De,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},r.a.createElement(B.a,{id:"scroll-dialog-title"},X===N?C:D),r.a.createElement(T.a,{dividers:!0},r.a.createElement(W.a,{id:"scroll-dialog-description",tabIndex:-1},X===N?r.a.createElement(U,{onSelect:function(e){i(e)},tree:le}):r.a.createElement(he,{onSelect:function(e){n(e)}}))),r.a.createElement(L.a,null,r.a.createElement(j.a,{onClick:ue,color:"primary"},"Cancel"),r.a.createElement(j.a,{onClick:function(){K(!1)},color:"primary"},"Save"))),r.a.createElement(g.a,{className:"justify-content-center mt-5"},r.a.createElement(y.a,{className:"col-10 charts-container"},te?r.a.createElement(je,{className:"loader-div"}):null)))}var Me=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(f,null),r.a.createElement(Ie,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(117);l.a.render(r.a.createElement(Me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},98:function(e,a,t){e.exports=t(118)}},[[98,1,2]]]);
//# sourceMappingURL=main.68124ab1.chunk.js.map